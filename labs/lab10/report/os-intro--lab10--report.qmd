---
## Author
author:
  name: Mohamed Musa
  student_number: "1032248286"
  group: "НКАбд-05"
  year: "2 год"
  email: "1032248286@pfur.ru"
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 19

## Title
title: "Лабораторная работа №10"
subtitle: "Текстовой редактор vi"
license: "CC BY"
---

# Цель работы

Познакомиться с операционной системой Linux. Получить практические навыки работы с редактором vi, установленным по умолчанию практически во всех дистрибутивах.

# Задание

1. Ознакомиться с теоретическим материалом
2. Ознакомиться с редактором vi
3. Выполнить упражнения, используя команды vi

# Теоретическое введение

## Редактор vi

**vi** (visual editor) — текстовый редактор, созданный Биллом Джоем в 1976 году. Присутствует практически во всех дистрибутивах Linux и Unix-подобных системах.

## Режимы работы vi

Редактор vi имеет три режима работы:

1. **Командный режим** — режим по умолчанию при запуске. Используется для перемещения по файлу, удаления, копирования текста.

2. **Режим вставки** — режим ввода текста. Для входа нажать клавишу \`i\`.

3. **Режим последней строки** — режим для выполнения команд сохранения, выхода, поиска. Для входа нажать \`:\`.

## Основные команды vi

**Запуск редактора:**

\`\`\`bash
vi filename        # Создать или открыть файл
vi +n filename     # Открыть файл на строке n
vi + filename      # Открыть файл на последней строке
\`\`\`

**Команды перемещения (командный режим):**

- \`h, j, k, l\` — влево, вниз, вверх, вправо
- \`0\` — начало строки
- \`$\` — конец строки
- \`w\` — следующее слово
- \`b\` — предыдущее слово
- \`G\` — конец файла
- \`gg\` или \`1G\` — начало файла

**Команды вставки:**

- \`i\` — вставка перед курсором
- \`a\` — вставка после курсора
- \`o\` — новая строка ниже
- \`O\` — новая строка выше

**Команды удаления:**

- \`x\` — удалить символ под курсором
- \`dw\` — удалить слово
- \`dd\` — удалить строку
- \`D\` — удалить до конца строки

**Команды отмены:**

- \`u\` — отменить последнее действие
- \`Ctrl+r\` — повторить отмененное действие

**Команды последней строки:**

- \`:w\` — сохранить файл
- \`:q\` — выйти из редактора
- \`:wq\` или \`:x\` — сохранить и выйти
- \`:q!\` — выйти без сохранения
- \`:set nu\` — показать номера строк
- \`:set nonu\` — скрыть номера строк

# Выполнение лабораторной работы

## Задание 1. Создание нового файла с использованием vi

### Создание каталога

Создан каталог для лабораторной работы:

\`\`\`bash
mkdir -p ~/work/os/lab06
cd ~/work/os/lab06
\`\`\`

### Создание файла hello.sh

Вызван редактор vi для создания нового файла:

\`\`\`bash
vi hello.sh
\`\`\`

### Ввод текста

После запуска vi нажата клавиша \`i\` для перехода в режим вставки. Введен следующий текст:

\`\`\`bash
#!/bin/bash
HELL=Hello
function hello {
LOCAL HELLO=World
echo $HELLO
}
echo $HELLO
hello
\`\`\`

Процесс создания файла показан на рисунке @fig-code.

![Создание файла hello.sh в редакторе vi](image/code.png){#fig-code width=80%}

### Сохранение файла

Для сохранения файла выполнены следующие действия:

1. Нажата клавиша \`Esc\` для перехода в командный режим
2. Нажата клавиша \`:\` для перехода в режим последней строки
3. Введены символы \`wq\` (write and quit)
4. Нажата клавиша \`Enter\`

### Установка прав доступа

Файл сделан исполняемым:

\`\`\`bash
chmod +x hello.sh
\`\`\`

## Задание 2. Редактирование существующего файла

### Открытие файла

Файл открыт для редактирования:

\`\`\`bash
vi ~/work/os/lab06/hello.sh
\`\`\`

### Исправление HELL на HELLO

Выполнены следующие действия:

1. Установлен курсор в конец слова HELL во второй строке (клавиши \`j\`, \`$\`)
2. Нажата клавиша \`i\` для перехода в режим вставки
3. Добавлена буква \`O\`
4. Нажата клавиша \`Esc\` для возврата в командный режим

### Удаление слова LOCAL

Выполнены следующие действия:

1. Установлен курсор на четвертую строку (клавиша \`j\`)
2. Установлен курсор на слово LOCAL (клавиша \`w\`)
3. Нажата команда \`dw\` для удаления слова

### Вставка слова local

Выполнены следующие действия:

1. Нажата клавиша \`i\` для перехода в режим вставки
2. Набран текст \`local\`
3. Нажата клавиша \`Esc\` для возврата в командный режим

### Вставка новой строки

Выполнены следующие действия:

1. Установлен курсор на последнюю строку файла (клавиша \`G\`)
2. Нажата клавиша \`o\` для вставки новой строки ниже
3. Набран текст \`echo $HELLO\`
4. Нажата клавиша \`Esc\` для перехода в командный режим

### Удаление и восстановление строки

Выполнены следующие действия:

1. Нажата команда \`dd\` для удаления последней строки
2. Введена команда \`u\` для отмены последнего действия (восстановление строки)

### Сохранение изменений

Для сохранения изменений:

1. Нажата клавиша \`:\` для перехода в режим последней строки
2. Введены символы \`wq\`
3. Нажата клавиша \`Enter\`

Процесс редактирования файла показан на рисунке @fig-commands.

![Редактирование файла в vi](image/commands.png){#fig-commands width=80%}

# Выводы

В ходе выполнения лабораторной работы были получены практические навыки работы с текстовым редактором vi:

1. ✅ **Освоены основы работы с редактором vi**
   - Запуск редактора для создания и редактирования файлов
   - Понимание трех режимов работы редактора

2. ✅ **Изучены режимы работы vi**
   - Командный режим для навигации и выполнения команд
   - Режим вставки для ввода текста
   - Режим последней строки для сохранения и выхода

3. ✅ **Практикованы команды перемещения**
   - Перемещение по строкам (j, k)
   - Перемещение к началу и концу строки (0, $)
   - Перемещение по словам (w, b)
   - Переход к концу файла (G)

4. ✅ **Освоены команды редактирования**
   - Вставка текста (i, a, o, O)
   - Удаление текста (x, dw, dd)
   - Отмена действий (u)

5. ✅ **Выполнены практические упражнения**
   - Создание нового файла hello.sh
   - Редактирование существующего файла
   - Исправление ошибок в тексте
   - Добавление и удаление строк

**Полученные навыки:**

Редактор vi является мощным инструментом для работы с текстовыми файлами в Linux. Знание vi необходимо для:

- Редактирования конфигурационных файлов на серверах
- Работы в терминале без графического интерфейса
- Быстрого редактирования файлов через SSH
- Системного администрирования Linux

Освоенные команды vi позволяют эффективно работать с текстовыми файлами в любом дистрибутиве Linux.

# Список литературы{.unnumbered}

- Vi Editor Tutorial: [https://www.tutorialspoint.com/unix/unix-vi-editor.htm](https://www.tutorialspoint.com/unix/unix-vi-editor.htm)
- Vim Documentation: [https://www.vim.org/docs.php](https://www.vim.org/docs.php)
- Learning the vi and Vim Editors: [https://www.oreilly.com/library/view/learning-the-vi/9780596529833/](https://www.oreilly.com/library/view/learning-the-vi/9780596529833/)
- Vi Cheat Sheet: [https://www.atmos.albany.edu/daes/atmclasses/atm350/vi_cheat_sheet.pdf](https://www.atmos.albany.edu/daes/atmclasses/atm350/vi_cheat_sheet.pdf)
